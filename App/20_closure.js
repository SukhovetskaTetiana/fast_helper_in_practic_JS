// CLOSURE FUNCTION

//Ð—Ð°Ð¼Ñ‹ÐºÐ°Ð½Ð¸Ðµ (Ð°Ð½Ð³Ð». closure) Ð² Ð¿Ñ€Ð¾Ð³Ñ€Ð°Ð¼Ð¼Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ð¸ â€” Ñ„ÑƒÐ½ÐºÑ†Ð¸Ñ Ð¿ÐµÑ€Ð²Ð¾Ð³Ð¾ ÐºÐ»Ð°ÑÑÐ°, Ð² Ñ‚ÐµÐ»Ðµ ÐºÐ¾Ñ‚Ð¾Ñ€Ð¾Ð¹ Ð¿Ñ€Ð¸ÑÑƒÑ‚ÑÑ‚Ð²ÑƒÑŽÑ‚ ÑÑÑ‹Ð»ÐºÐ¸ Ð½Ð° Ð¿ÐµÑ€ÐµÐ¼ÐµÐ½Ð½Ñ‹Ðµ, Ð¾Ð±ÑŠÑÐ²Ð»ÐµÐ½Ð½Ñ‹Ðµ Ð²Ð½Ðµ Ñ‚ÐµÐ»Ð° ÑÑ‚Ð¾Ð¹ Ñ„ÑƒÐ½ÐºÑ†Ð¸Ð¸ Ð² Ð¾ÐºÑ€ÑƒÐ¶Ð°ÑŽÑ‰ÐµÐ¼ ÐºÐ¾Ð´Ðµ Ð¸ Ð½Ðµ ÑÐ²Ð»ÑÑŽÑ‰Ð¸ÐµÑÑ ÐµÑ‘ Ð¿Ð°Ñ€Ð°Ð¼ÐµÑ‚Ñ€Ð°Ð¼Ð¸.

// Ð—Ð°Ð¼Ñ‹ÐºÐ°Ð½Ð¸Ðµ - ÑÑ‚Ð¾ Ñ„ÑƒÐ½ÐºÑ†Ð¸Ñ, ÑÐ¾Ð´ÐµÑ€Ð¶Ð°Ñ‰Ð°Ñ Ð² ÑÐµÐ±Ðµ ÑÑÑ‹Ð»ÐºÐ¸ Ð½Ð° Ð¿ÐµÑ€ÐµÐ¼ÐµÐ½Ð½Ñ‹Ðµ Ð¸Ð· Ð²Ð½ÐµÑˆÐ½ÐµÐ¹ Ð¾Ð±Ð»Ð°ÑÑ‚Ð¸ Ð²Ð¸Ð´Ð¸Ð¼Ð¾ÑÑ‚Ð¸. Ð¢.Ðµ. Ð¾Ð½Ð° "Ð·Ð°Ð¼Ñ‹ÐºÐ°ÐµÑ‚" Ð²Ð½ÐµÑˆÐ½Ð¸Ðµ Ð¿ÐµÑ€ÐµÐ¼ÐµÐ½Ð½Ñ‹Ðµ Ð² ÑÐµÐ±Ðµ.

//ÐžÑ‚Ð½Ð¾ÑÐ¸Ñ‚ÐµÐ»ÑŒÐ½Ð¾ javascrtipt Ð·Ð°Ð¼Ñ‹ÐºÐ°Ð½Ð¸Ðµ - ÑÑ‚Ð¾ ÐºÐ¾Ð¿Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ Ñ€Ð¾Ð´Ð¸Ñ‚ÐµÐ»ÑŒÑÐºÐ¾Ð¹ Ð¾Ð±Ð»Ð°ÑÑ‚Ð¸ Ð²Ð¸Ð´Ð¸Ð¼Ð¾ÑÑ‚Ð¸ (Ð° ÑÑ‚Ð°Ð»Ð¾ Ð±Ñ‹Ñ‚ÑŒ Ð²ÑÐµÑ… Ð¿ÐµÑ€ÐµÐ¼ÐµÐ½Ð½Ñ‹Ñ… Ð² Ð½ÐµÐ¹) Ð² Ð´Ð¾Ñ‡ÐµÑ€Ð½ÑŽÑŽ. Ð Ð¾Ð±Ð»Ð°ÑÑ‚ÑŒ Ð²Ð¸Ð´Ð¸Ð¼Ð¾ÑÑ‚Ð¸ Ð² javascript Ð¾Ð³Ñ€Ð°Ð½Ð¸Ñ‡Ð¸Ð²Ð°ÐµÑ‚ÑÑ Ñ„ÑƒÐ½ÐºÑ†Ð¸ÑÐ¼Ð¸.

//Ð²Ñ‹Ð¿Ð¾Ð»Ð½ÑÑŽÑ‰Ð°ÑÑÑ Ñ„ÑƒÐ½ÐºÑ†Ð¸Ñ - ÑÑ‚Ð¾ Ð¾Ð±ÑŒÐµÐºÑ‚ Ð² Ð¿Ð°Ð¼ÑÑ‚Ð¸
// ÑÐ²Ð¾Ð¹ÑÑ‚Ð²Ð° ÑÑ‚Ð¾Ð³Ð¾ Ð¾Ð±ÑŒÐµÐºÑ‚Ð° - ÑÑ‚Ð¾ Ð¿ÐµÑ€ÐµÐ¼ÐµÐ½Ð½Ñ‹Ðµ Ñ„ÑƒÐ½ÐºÑ†Ð¸Ð¸
// Ð²Ð½ÑƒÑ‚Ñ€Ð¸ Ð¾Ð±ÑŒÐµÐºÑ‚Ð° Ð¾Ð´Ð½Ð¾Ð¹ Ñ„ÑƒÐ½ÐºÑ†Ð¸Ð¸ Ð¼Ð¾Ð¶Ð½Ð¾ Ð·Ð°Ð¿ÑƒÑÑ‚Ð¸Ñ‚ÑŒ Ð´Ñ€ÑƒÐ³ÑƒÑŽ Ñ„ÑƒÐ½ÐºÑ†Ð¸ÑŽ ÐºÐ¾Ñ‚Ð¾Ñ€Ð°Ñ Ð¼Ð¾Ð¶ÐµÑ‚ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÑŒ ÑÐ²Ð¾Ð¹ÑÑ‚Ð²Ð° Ð¾Ð±ÑŒÐµÐºÑ‚Ð° Ð²Ð½ÐµÑˆÐ½ÐµÐ¹ Ñ„ÑƒÐ½ÐºÑ†Ð¸Ð¸
// Ð¾Ð±Ñ‹Ñ‡Ð½Ð¾ Ð¿Ð¾ÑÐ»Ðµ Ð²Ñ‹Ð¿Ð¾Ð»Ð½ÐµÐ½Ð¸Ñ Ñ„ÑƒÐ½ÐºÑ†Ð¸Ð¸ ÐµÐµ Ð¾Ð±ÑŒÐµÐºÑ‚ ÑƒÐ´Ð°Ð»ÑÐµÑ‚ÑÑ Ð¸Ð· Ð¿Ð°Ð¼ÑÑ‚Ð¸ Ð°Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¸ ÑÐ±Ð¾Ñ€Ñ‰Ð¸ÐºÐ¾Ð¼ Ð¼ÑƒÑÐ¾Ñ€Ð°
// Ð½Ð¾ ÐµÑÐ»Ð¸ ÑÐ²Ð¾Ð¹ÑÑ‚Ð²Ð° ÑÑ‚Ð¾Ð³Ð¾ Ð¾Ð±ÐµÐºÑ‚Ð° Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÑŽÑ‚ÑÑ Ð½Ð°Ð¿Ñ€Ð¸Ð¼ÐµÑ€ Ð²Ð½ÑƒÑ‚Ñ€ÐµÐ½Ð½ÐµÐ¹ Ñ„ÑƒÐ½ÐºÑ†Ð¸ÐµÐ¹ Ñ‚Ð¾ Ð¾Ð±ÑŒÐµÐºÑ‚ Ð½Ðµ Ð¸ÑÑ‡ÐµÐ·Ð°ÐµÑ‚

const fnA = (parameter) => {
  const innerVaiableFnA = `It's inner fnA`;

  const innerfnB = () => {
    console.log(`${parameter} ${innerVaiableFnA} and it's call innerFnB`);
  };
  return innerfnB;
};

// fnA('hI'); // undefined

const fnC = fnA("HI!");
console.log(fnC); // () => {console.log(`${parameter} ${innerVaiableFnA} and it's call innerFnB`);}

fnC(); // HI! It's inner fnA and it's call innerFnB

// make dish

// const makeDish = (sheffName, dish) => {
// console.log(`${sheffName} make ${dish}`);
// };

const makeSheff = (name) => {
  const makeDish = (dish) => {
    console.log(`${name} make ${dish}`);
  };
  return makeDish;
};

makeSheff("Stefan"); // undefined

const sheffStefan = makeSheff("Stefan");
console.log(sheffStefan); // (sheffName, dish) => {console.log(`${sheffName} make ${dish}`);}
sheffStefan(); // Stefan make undefined
sheffStefan("potato"); // Stefan make potato

const sheffNicholas = makeSheff("Nicholas");
sheffNicholas("soup with cheese"); // Nicholas make soup with cheese

// closure rounders

function rounders(num, quantity) {
  return Number(num.toFixed(quantity));
}

console.log(rounders(2.34565, 2)); //2.35

function getRounder(quantity) {
  function rounders(num) {
    return Number(num.toFixed(quantity));
  }
  return rounders;
}

const rounder1 = getRounder(1);
console.log(rounder1(3.342341)); // 3.3
console.log(rounder1(8.042342)); // 8

const rounder2 = getRounder(2);
console.log(rounder2(3.342341)); // 3.34
console.log(rounder2(8.042342)); // 8.04

const rounder3 = getRounder(3);
console.log(rounder3(3.342343)); // 3.342
console.log(rounder3(8.042344)); // 8.042

const rounder4 = getRounder(4);
console.log(rounder4(3.342343)); // 3.3423
console.log(rounder4(8.042344)); // 8.0423

// closure value

function myLibFactory() {
  let value = 1;

  const add = (num) => {
    value += num;
  };

  return {
    add,
    getValue() {
      return value;
    },
  };
}

const myLib = myLibFactory();
console.log(myLib); // {add: Æ’, getValue: Æ’}
console.log(myLib.getValue); // getValue() {return value;}
myLib.getValue(); // undefined
console.log(myLib.getValue()); // 1
myLib.add(10);
console.log(myLib.getValue()); // 11

// closure salary

const salary = (teacherName, salary = 0) => {
  // private variable
  let baseSalary = salary;

  //interface
  return {
    raise(amount) {
      if (amount > 1000) {
        return `Are you awesome?`;
      }
      baseSalary += amount;
    },
    lower(amount) {
      return (baseSalary -= amount);
    },
    currentSalary(amount) {
      return `${teacherName}'s current salary is ${baseSalary}$`;
    },
  };
};

const mathTeacher = salary("Oncu", 700);
console.log(mathTeacher); // {raise: Æ’, lower: Æ’, currentSalary: Æ’}
mathTeacher.currentSalary(); // undefined
console.log(mathTeacher.currentSalary()); // Oncu's current salary is 700$

mathTeacher.raise(100);
console.log(mathTeacher.currentSalary()); // Oncu's current salary is 800$

mathTeacher.lower(30); // undefined
console.log(mathTeacher.lower(30)); // 740 => 800 - 30 - 30
// console.log(mathTeacher.lower()); // NaN
console.log(mathTeacher.currentSalary()); // Oncu's current salary is 740$

mathTeacher.raise(15000);
console.log(mathTeacher.raise(15000)); // Are you awesome?
console.log(mathTeacher.currentSalary()); // Oncu's current salary is 740$

// ARROW FUNCTION ==============================================================================

const arrowFn = () => {
  return {
    name: "Harry",
  };
};

console.log(arrowFn()); // {name: 'Harry'}

const arrowFnA = () => ({ name: "Harry" });
console.log(arrowFnA()); // {name: 'Harry'}

// INLINE FUNCTION ===============================================================================

const fnD = (arr, test) => {
  const filterArr = [];

  for (const num of arr) {
    const passed = test(num);

    if (passed) {
      filterArr.push(num);
    }
  }
  return filterArr;
};

const getEqual = (num) => num > 12;

const fnE = fnD([10, 5, 13, 234], getEqual);
console.log(fnE); // Â [13, 234]

const fnF = fnD([10, 5, 13, 234], (num) => num > 12); // INLINE FUNCTION
console.log(fnF); //[13, 234]

// ARROW FUNCTION + THIS
// EXPLICIT RETURN  ÑÐ²Ð½Ñ‹Ð¹ Ð²Ð¾Ð·Ð²Ñ€Ð°Ñ‚  { return ... }
// IMPLICIT RETURN  Ð½ÐµÑÐ²Ð½Ñ‹Ð¹ Ð²Ð¾Ð·Ð²Ñ€Ð°Ñ‚

const add = (...args) => args;
add(1, 23, 45);
console.log(add(1, 23, 45)); // [1, 23, 45]

// context this
//  ÑÐºÑ‰Ð¾ Ð² ÑÑ‚Ñ€Ñ–Ð»Ð¾Ñ‡Ð½Ñ–Ð¹ Ñ„-Ñ†Ñ–Ñ— Ð² Ð³Ð»Ð¾Ð±Ð°Ð»ÑŒÐ½Ð¾Ð¼Ñƒ Ð¿Ð¾Ð»Ñ– ÐºÐ¾Ð½Ñ‚ÐµÐºÑÑ‚Ñƒ this - window (undefined)
const showThis = () => {
  console.log("this is in showThis: ", this);
};

showThis(); // this is in showThis: window (undefined)
// this.showThis(); //Uncaught TypeError:

const showThatThis = function () {
  console.log("this is in showThatThis: ", this);
};

showThatThis(); // this is in showThatThis:  undefined

const anybody = { nameAnybody: "Anybody" };

anybody.showContext = showThis;
anybody.showContext(); //this is in showThis: window (undefined)

// this Ð² Ð¼ÐµÑ‚Ð¾Ð´Ñ–
// arrow how object methods
const anybodyUser = {
  fullName: "Anybody",
  showName() {
    console.log("this: ", this); // {fullName: 'Anybody', showName{....}}
    console.log("this.fullName: ", this.fullName); // 'Anybody'

    const inner = function () {
      console.log("this is in inner: ", this); // this is in inner:  undefined
      // console.log('this.fullName: ', this.fullName); // Uncaught TypeError: Cannot read properties of undefined
    };

    inner();

    const innerArrow = () => {
      console.log("this is in innerArrow: ", this); // {fullName: 'Anybody', showName{....}}
      console.log("this.fullName: ", this.fullName); // this.fullName:  Anybody
    };

    innerArrow();
  },
};
anybodyUser.showName();

// context this
const book = {
  title: "React for beginners",
  showThis() {
    console.log("showThis -> this", this);
  },
  showTitle() {
    console.log("showTitle -> this.title", this.title);
  },
};

book.showThis(); // title: 'React for beginners', showThis: Æ’, showTitle: Æ’}
book.showTitle(); // React for beginners

const outerShowThis = book.showThis;
outerShowThis(); // this undefined

// const outerShowTitle = book.showTitle;
// outerShowTitle(); // TypeError: Cannot read properties of undefined

//context this
const makeChangeColor = function () {
  const changeColor = function (color) {
    console.log("changeColor -> this", this);
    //this.color = color;
  };
  changeColor(); // this undefined

  const sweater = {
    color: "teal",
  };

  sweater.updateColor = changeColor;

  sweater.updateColor("red"); // {color: 'teal', updateColor: Æ’}

  return sweater.updateColor;
};

makeChangeColor(); //
console.log(makeChangeColor());
//  f (color) {
//   console.log('changeColor -> this', this);
//   //this.color = color;
// }

/*
 * ÐšÐ¾Ð»Ð±ÐµÐº-Ñ„ÑƒÐ½ÐºÑ†Ñ–Ñ—, Ñ„ÑƒÐ½ÐºÑ†Ñ–Ñ— Ð²Ð¸Ñ‰Ð¾Ð³Ð¾ Ð¿Ð¾Ñ€ÑÐ´ÐºÑƒ
 */

const greet = function (username, callback) {
  callback(username);
};

const simpleGreet = function (username) {
  console.log(`Hello ${username}`);
};

const fullGreet = function (fullName) {
  console.log(`Hello ${fullName}`);
};

const prettyGreet = function (username) {
  console.log(`Hello ${username} ðŸ‘‹`);
};

greet("Oleksii", simpleGreet);
greet("Oleksii Repin", fullGreet);
greet("Oleksii", prettyGreet);

// ? Ð—Ð°Ð¿Ð¸Ñ‚ Ð½Ð° ÑÐµÑ€Ð²ÐµÑ€
//
const fetchUser = async function (userUrl, callback) {
  const response = await fetch(`https://api.github.com/users/${userUrl}`);
  const result = await response.json();

  callback(result);
};

const showInfoAboutUser = function (user) {
  console.log(user);
};

const showAvatar = function (user) {
  console.log(user.avatar_url);
};

fetchUser("olexiy-repin", showInfoAboutUser);
fetchUser("olexiy-repin", showAvatar);

/*
? ÐÐ°Ð¿Ð¸ÑˆÑ–Ñ‚ÑŒ Ñ„ÑƒÐ½ÐºÑ†Ñ–ÑŽ each(array, callback), ÑÐºÐ° Ð¿ÐµÑ€ÑˆÐ¸Ð¼ Ð¿Ð°Ñ€Ð°Ð¼ÐµÑ‚Ñ€Ð¾Ð¼ Ð¾Ñ‡Ñ–ÐºÑƒÑ” Ð¼Ð°ÑÐ¸Ð², Ð° Ð´Ñ€ÑƒÐ³Ð¸Ð¼ - Ñ„ÑƒÐ½ÐºÑ†Ñ–ÑŽ, ÑÐºÐ° Ð·Ð°ÑÑ‚Ð¾ÑÐ¾Ð²ÑƒÑ”Ñ‚ÑŒÑÑ Ð´Ð¾ ÐºÐ¾Ð¶Ð½Ð¾Ð³Ð¾ ÐµÐ»ÐµÐ¼ÐµÐ½Ñ‚Ð° Ð¼Ð°ÑÐ¸Ð²Ñƒ.
? Ð¤ÑƒÐ½ÐºÑ†Ñ–Ñ each Ð¿Ð¾Ð²Ð¸Ð½Ð½Ð° Ð¿Ð¾Ð²ÐµÑ€Ð½ÑƒÑ‚Ð¸ Ð½Ð¾Ð²Ð¸Ð¹ Ð¼Ð°ÑÐ¸Ð², ÐµÐ»ÐµÐ¼ÐµÐ½Ñ‚Ð°Ð¼Ð¸ ÑÐºÐ¾Ð³Ð¾ Ð±ÑƒÐ´ÑƒÑ‚ÑŒ Ñ€ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚Ð¸ Ð²Ð¸ÐºÐ»Ð¸ÐºÑƒ ÐºÐ¾Ð»Ð±Ð±ÐµÐºÐ°.
*/

const numbersA = [1, 2, 3, 4, 5];

const eachEl = function (array, callback) {
  const newArray = [];

  for (const item of array) {
    const updatedItem = callback(item);
    newArray.push(updatedItem);
  }

  return newArray;
};

const multi = function (el) {
  return el * 2;
};

const addA = function (el) {
  return el + 2;
};

const logElements = function (el) {
  return el * el;
};

console.log(eachEl(numbersA, multi)); // [2, 4, 6, 8, 10]
console.log(eachEl(numbersA, addA)); // [3, 4, 5, 6, 7]
console.log(eachEl(numbersA, logElements)); //[1, 4, 9, 16, 25]

/*
? ÐÐ°Ð¿Ð¸ÑˆÑ–Ñ‚ÑŒ Ñ‚Ð°ÐºÑ– Ñ„ÑƒÐ½ÐºÑ†Ñ–Ñ—:
? createProduct(product, callback) - Ð¿Ñ€Ð¸Ð¹Ð¼Ð°Ñ” Ð¾Ð±'Ñ”ÐºÑ‚ Ñ‚Ð¾Ð²Ð°Ñ€Ñƒ Ð±ÐµÐ· id, Ð° Ñ‚Ð°ÐºÐ¾Ð¶ ÐºÐ¾Ð»Ð±ÐµÐº-Ñ„ÑƒÐ½ÐºÑ†Ñ–ÑŽ.
? Ð¤ÑƒÐ½ÐºÑ†Ñ–Ñ ÑÑ‚Ð²Ð¾Ñ€ÑŽÑ” Ð¾Ð±'Ñ”ÐºÑ‚ Ñ‚Ð¾Ð²Ð°Ñ€Ñƒ, Ð´Ð¾Ð´Ð°ÑŽÑ‡Ð¸ Ð¹Ð¾Ð¼Ñƒ ÑƒÐ½Ñ–ÐºÐ°Ð»ÑŒÐ½Ð¸Ð¹ Ñ–Ð´ÐµÐ½Ñ‚Ð¸Ñ„Ñ–ÐºÐ°Ñ‚Ð¾Ñ€ Ð´Ð¾ Ð²Ð»Ð°ÑÑ‚Ð¸Ð²Ð¾ÑÑ‚Ñ– id Ñ– Ð²Ð¸ÐºÐ»Ð¸ÐºÐ°Ñ” ÐºÐ¾Ð»Ð±ÐµÐº Ð¿ÐµÑ€ÐµÐ´Ð°ÑŽÑ‡Ð¸ Ð¹Ð¾Ð¼Ñƒ ÑÑ‚Ð²Ð¾Ñ€ÐµÐ½Ð¸Ð¹ Ð¾Ð±'Ñ”ÐºÑ‚.
? logProduct(product) - ÐºÐ¾Ð»Ð»Ð±ÐµÐº, Ñ‰Ð¾ Ð¿Ñ€Ð¸Ð¹Ð¼Ð°Ñ” Ð¾Ð±'Ñ”ÐºÑ‚ Ð¿Ñ€Ð¾Ð´ÑƒÐºÑ‚Ñƒ Ñ– Ð»Ð¾Ð³ÑƒÑ” Ð¹Ð¾Ð³Ð¾ Ð² ÐºÐ¾Ð½ÑÐ¾Ð»ÑŒ
? logTotalPrice(product) - ÐºÐ¾Ð»Ð»Ð±ÐµÐº, Ñ‰Ð¾ Ð¿Ñ€Ð¸Ð¹Ð¼Ð°Ñ” Ð¾Ð±'Ñ”ÐºÑ‚ Ð¿Ñ€Ð¾Ð´ÑƒÐºÑ‚Ñƒ Ñ– Ð»Ð¾Ð³Ñ–ÑŽÑ” Ð·Ð°Ð³Ð°Ð»ÑŒÐ½Ñƒ Ð²Ð°Ñ€Ñ‚Ñ–ÑÑ‚ÑŒ Ñ‚Ð¾Ð²Ð°Ñ€Ñƒ Ð² ÐºÐ¾Ð½ÑÐ¾Ð»ÑŒ
*/

const createProduct = (product, callback) => {
  const newProduct = {
    id: Date.now(),
    ...product,
  };

  callback(newProduct);
};

const logProduct = (product) => {
  console.log(product);
};

const logTotalPrice = ({ price, quantity } = {}) => {
  console.log(`Total price: ${price * quantity}`);
};

function doubleQuantity({ quantity }) {
  console.log(quantity * 2);
}

const product = { name: "Tomato", price: 10, quantity: 43 };
createProduct(product, doubleQuantity);
createProduct({ name: "ðŸŽ", price: 30, quantity: 3 }, logProduct);
createProduct({ name: "ðŸŽ", price: 30, quantity: 3 }, logTotalPrice);

createProduct({ name: "ðŸ‹", price: 20, quantity: 5 }, logProduct);
createProduct({ name: "ðŸ‹", price: 20, quantity: 5 }, logTotalPrice);

/*
? Ð”Ð¾Ð´Ð°Ð¹Ñ‚Ðµ Ð¾Ð±'Ñ”ÐºÑ‚Ñƒ account Ð¼ÐµÑ‚Ð¾Ð´Ð¸  withdraw(amount, onSuccess, onError) Ñ– deposit(amount, onSuccess, onError), Ð´Ðµ Ð¿ÐµÑ€ÑˆÐ¸Ð¹ Ð¿Ð°Ñ€Ð°Ð¼ÐµÑ‚Ñ€ Ñ†Ðµ ÑÑƒÐ¼Ð° Ð¾Ð¿ÐµÑ€Ð°Ñ†Ñ–Ñ—, Ð° Ð´Ñ€ÑƒÐ³Ð¸Ð¹ Ñ– Ñ‚Ñ€ÐµÑ‚Ñ–Ð¹ - ÐºÐ¾Ð»Ð±ÐµÐºÐ¸.
?
? ÐœÐµÑ‚Ð¾Ð´ withdraw Ð²Ð¸ÐºÐ»Ð¸ÐºÐ°Ñ”:
? onError(`Amount should not exceed ${TRANSACTION_LIMIT} credits`) ÑÐºÑ‰Ð¾ amount Ð±Ñ–Ð»ÑŒÑˆÐµ TRANSACTION_LIMIT
? onError(`Amount can't exceed account balance of ${this.balance} credits`) ÑÐºÑ‰Ð¾ amount Ð±Ñ–Ð»ÑŒÑˆÐµ this.balance
? Ñ–Ð½Ð°ÐºÑˆÐµ Ð·Ð½Ñ–Ð¼Ð°Ñ”Ð¼Ð¾ Ð³Ñ€Ð¾ÑˆÑ– Ð· Ð±Ð°Ð»Ð°Ð½ÑÑƒ Ñ– Ð²Ð¸ÐºÐ»Ð¸ÐºÐ°Ñ”Ð¼Ð¾ onSuccess(`Account balance: ${this.balance}`)
?
? ÐœÐµÑ‚Ð¾Ð´ deposit Ð²Ð¸ÐºÐ»Ð¸ÐºÐ°Ñ”:
? onError(`Amount should not exceed ${TRANSACTION_LIMIT} credits`) ÑÐºÑ‰Ð¾ amount Ð±Ñ–Ð»ÑŒÑˆÐµ TRANSACTION_LIMIT
? onError(`Amount must be more than 0 credits`) ÑÐºÑ‰Ð¾ amount Ð¼ÐµÐ½ÑˆÐµ Ð°Ð±Ð¾ Ð´Ð¾Ñ€Ñ–Ð²Ð½ÑŽÑ” Ð½ÑƒÐ»ÑŽ
? Ñ–Ð½Ð°ÐºÑˆÐµ Ð´Ð¾Ð´Ð°Ñ”Ð¼Ð¾ Ð´Ð¾ Ð±Ð°Ð»Ð°Ð½ÑÑƒ amount Ñ– Ð²Ð¸ÐºÐ»Ð¸ÐºÐ°Ñ”Ð¼Ð¾ onSuccess(`Account balance: ${this.balance}`)
*/

const TRANSACTION_LIMIT = 1000;

const account = {
  username: "Jacob",
  balance: 400,

  withdraw(amount, onSuccess, onError) {
    if (amount > TRANSACTION_LIMIT || amount > this.balance) {
      onError({
        message: "CÑ‚Ð°Ð»Ð°ÑÑŒ Ð±Ñ–Ð´Ð°. Ð›Ñ–Ð¼Ñ–Ñ‚ Ð¿ÐµÑ€ÐµÐ²Ð¸Ñ‰ÐµÐ½Ð¾ Ð°Ð±Ð¾ Ð³Ñ€Ð¾ÑˆÐµÐ¹ Ð½ÐµÐ¼Ð°",
        status: "ERROR",
      });
    } else {
      onSuccess({
        status: "OK",
        message: "ÐžÐ¿ÐµÑ€Ð°Ñ†Ñ–Ñ withdraw ÑƒÑÐ¿Ñ–ÑˆÐ½Ð°",
      });
    }
  },

  // withdraw(amount, onSuccess, onError) {
  //   if (amount > TRANSACTION_LIMIT) {
  //     onError(`Amount should not exceed ${TRANSACTION_LIMIT} credits`);
  //   } else if (amount > this.balance) {
  //     onError(`Amount can't exceed account balance of ${this.balance} credits`);
  //   } else {
  //     this.balance -= amount;
  //     onSuccess(`Account balance: ${this.balance}`);
  //   }
  // },

  deposit(amount, onSuccess, onError) {
    if (amount <= 0 || amount > TRANSACTION_LIMIT) {
      onError({
        message:
          "Deposit Ð½Ðµ Ð²Ð´Ð°Ð²ÑÑ. Ð‘Ð¾ ÑÑƒÐ¼Ð° Ð¼ÐµÐ½ÑˆÐµ Ð°Ð±Ð¾ Ð´Ð¾Ñ€Ñ–Ð²Ð½ÑŽÑ” Ð½ÑƒÐ»ÑŒ. ÐÐ±Ð¾ Ð»Ñ–Ð¼Ñ–Ñ‚ Ð¿ÐµÑ€ÐµÐ²Ð¸Ñ‰ÐµÐ½Ð¾",
        status: "ERROR DEPOSIT",
      });
    } else {
      onSuccess({
        message: "Ð’ÑÐµ Ð³ÑƒÐ´",
      });
    }
  },
};

// deposit(amount, onSuccess, onError) {
//   if (amount > TRANSACTION_LIMIT) {
//     onError(`Amount should not exceed ${TRANSACTION_LIMIT} credits`);
//   } else if (amount <= 0) {
//     onError(`Amount must be more than 0 credits`);
//   } else {
//     this.balance += amount;
//     onSuccess(`Account balance: ${this.balance}`);
//   }
// },

const handleSuccess = ({ message, status = "OK" }) => {
  console.log(`${status}: ${message}`);
};

const handleError = ({ message, status }) => {
  console.log(`${status}: ${message}`);
};

// function handleSuccess(message) {
//   console.log(`âœ… Success! ${message}`);
// }

// function handleError(message) {
//   console.log(`âŒ Error! ${message}`);
// }

account.withdraw(2000, handleSuccess, handleError);
account.withdraw(600, handleSuccess, handleError);
account.withdraw(300, handleSuccess, handleError);
account.deposit(1700, handleSuccess, handleError);
account.deposit(0, handleSuccess, handleError);
account.deposit(-600, handleSuccess, handleError);
account.deposit(600, handleSuccess, handleError);

//
function eachA(array, callback) {
  const newArr = [];
  for (const el of array) {
    newArr.push(callback(el));
  }
  return newArr;
}

console.log(eachA([64, 49, 36, 25, 16], (value) => value * 2)); //[128, 98, 72, 50, 32]
console.log(eachA([64, 49, 36, 25, 16], (value) => value - 10)); //[54, 39, 26, 15, 6]

console.log(
  eachA([64, 49, 36, 25, 16], function (value) {
    return Math.sqrt(value);
  })
); //Â [8, 7, 6, 5, 4]

//
const usersA = [
  {
    name: "artem",
    age: 30,
  },
];

const resA = eachA(usersA, (user) => {
  return {
    ...user,
    name: user.name.toUpperCase(),
  };
});

console.log(resA); // {name: 'ARTEM', age: 30}
